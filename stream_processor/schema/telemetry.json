{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Vehicle Telemetry Schema",
  "required": ["deviceId", "timestamp", "location", "speedKmph", "acceleration"],
  "properties": {
    "deviceId": {
      "type": "string",
      "pattern": "^[A-Z0-9_]{8,32}$",
      "description": "Unique device identifier"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp"
    },
    "location": {
      "type": "object",
      "required": ["lat", "lon"],
      "properties": {
        "lat": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "description": "Latitude in decimal degrees"
        },
        "lon": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "description": "Longitude in decimal degrees"
        },
        "altitude": {
          "type": "number",
          "description": "Altitude in meters"
        }
      }
    },
    "speedKmph": {
      "type": "number",
      "minimum": 0,
      "maximum": 300,
      "description": "Speed in kilometers per hour"
    },
    "acceleration": {
      "type": "object",
      "required": ["x", "y", "z"],
      "properties": {
        "x": {"type": "number", "minimum": -50, "maximum": 50, "description": "X-axis acceleration (m/s²)"},
        "y": {"type": "number", "minimum": -50, "maximum": 50, "description": "Y-axis acceleration (m/s²)"},
        "z": {"type": "number", "minimum": -50, "maximum": 50, "description": "Z-axis acceleration (m/s²)"}
      }
    },
    "fuelLevel": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "Fuel level percentage (optional)"
    },
    "heading": {
      "type": "number",
      "minimum": 0,
      "maximum": 360,
      "description": "Heading in degrees (0-360)"
    },
    "engineData": {
      "type": "object",
      "properties": {
        "rpm": {"type": "number", "minimum": 0, "maximum": 10000},
        "engineTemp": {"type": "number", "minimum": -40, "maximum": 150}
      }
    },
    "diagnostics": {
      "type": "object",
      "properties": {
        "errorCodes": {
          "type": "array",
          "items": {"type": "string"}
        },
        "batteryVoltage": {"type": "number", "minimum": 0, "maximum": 24}
      }
    }
  }
}